<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur de Pointage PSTQ (Québec)</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; }
        .header-title { background-color: #003366; color: white; padding: 20px 0; margin-bottom: 30px; }
        .section-header { background-color: #e9ecef; padding: 10px; border-left: 5px solid #003366; margin-top: 20px; font-weight: bold; }
        .sticky-bottom-bar { position: fixed; bottom: 0; width: 100%; background-color: #003366; color: white; padding: 15px; box-shadow: 0 -2px 10px rgba(0,0,0,0.2); z-index: 1000; }
        .card { margin-bottom: 15px; border: none; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .score-badge { font-size: 1.2em; background-color: #ffc107; color: #000; padding: 5px 10px; border-radius: 5px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="header-title text-center">
        <h1>Calculateur de Pointage PSTQ</h1>
        <p class="lead">Programme de sélection des travailleurs qualifiés</p>
        <small>Basé sur le document <a href="https://cdn-contenu.quebec.ca/cdn-contenu/immigration/publications/fr/Pointage_criteres.pdf">Pointage des Critères</a> mis à jour le 2 juillet 2025</small>
    </div>

    <div class="container mb-5 pb-5">
        
        <div class="card p-3 mb-4 border-primary">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <label for="statutMarital" class="form-label fw-bold">Statut du demandeur :</label>
                    <select id="statutMarital" class="form-select" onchange="toggleSpouseSection(); calculateTotal()">
                        <option value="single">Ressortissant étranger (Seul)</option>
                        <option value="couple">Ressortissant étranger avec époux/conjoint accompagnant</option>
                    </select>
                </div>
                <div class="col-md-6 text-muted mt-2 mt-md-0">
                    <small>Le barème de points pour le "Capital Humain" change selon que vous êtes seul ou en couple .</small>
                </div>
            </div>
        </div>

        <form id="calculatorForm">

            <h3 class="section-header">1. Capital Humain (Max 520 pts)</h3>
            
            <div class="card p-3">
                <h5>a. Connaissance du français </h5>
                <div class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">Compréhension orale</label>
                        <select class="form-select calc-input" data-cat="fr_oral_comp">
                            <option value="0">Niveau 1 à 4 (0 pts)</option>
                            <option value="1">Niveau 5 ou 6</option>
                            <option value="2">Niveau 7 ou 8</option>
                            <option value="3">Niveau 9 ou 10</option>
                            <option value="4">Niveau 11 ou 12</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Production orale</label>
                        <select class="form-select calc-input" data-cat="fr_oral_prod">
                            <option value="0">Niveau 1 à 4 (0 pts)</option>
                            <option value="1">Niveau 5 ou 6</option>
                            <option value="2">Niveau 7 ou 8</option>
                            <option value="3">Niveau 9 ou 10</option>
                            <option value="4">Niveau 11 ou 12</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Compréhension écrite</label>
                        <select class="form-select calc-input" data-cat="fr_ecrit_comp">
                            <option value="0">Niveau 1 à 4 (0 pts)</option>
                            <option value="1">Niveau 5 ou 6</option>
                            <option value="2">Niveau 7 ou 8</option>
                            <option value="3">Niveau 9 ou 10</option>
                            <option value="4">Niveau 11 ou 12</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Production écrite</label>
                        <select class="form-select calc-input" data-cat="fr_ecrit_prod">
                            <option value="0">Niveau 1 à 4 (0 pts)</option>
                            <option value="1">Niveau 5 ou 6</option>
                            <option value="2">Niveau 7 ou 8</option>
                            <option value="3">Niveau 9 ou 10</option>
                            <option value="4">Niveau 11 ou 12</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="card p-3">
                <h5>b. Âge </h5>
                <label class="form-label">Âge à la date d'extraction</label>
                <select class="form-select calc-input" data-cat="age">
                    <option value="0">45 ans ou plus (0 pts)</option>
                    <option value="1">18 à 19 ans</option>
                    <option value="2">20 à 30 ans</option>
                    <option value="3">31 ans</option>
                    <option value="4">32 ans</option>
                    <option value="5">33 ans</option>
                    <option value="6">34 ans</option>
                    <option value="7">35 ans</option>
                    <option value="8">36 ans</option>
                    <option value="9">37 ans</option>
                    <option value="10">38 ans</option>
                    <option value="11">39 ans</option>
                    <option value="12">40 ans</option>
                    <option value="13">41 ans</option>
                    <option value="14">42 ans</option>
                    <option value="15">43 ans</option>
                    <option value="16">44 ans</option>
                </select>
            </div>

            <div class="card p-3">
                <h5>c. Durée de l'expérience de travail </h5>
                <label class="form-label">Acquise au cours des 5 dernières années</label>
                <select class="form-select calc-input" data-cat="experience">
                    <option value="0">Moins de 12 mois (0 pts)</option>
                    <option value="1">12 à 23 mois</option>
                    <option value="2">24 à 35 mois</option>
                    <option value="3">36 à 47 mois</option>
                    <option value="4">48 mois et plus</option>
                </select>
            </div>

            <div class="card p-3">
                <h5>d. Niveau de scolarité </h5>
                <select class="form-select calc-input" data-cat="scolarite">
                    <option value="0">Inférieur au secondaire (0 pts)</option>
                    <option value="1">Secondaire général complété</option>
                    <option value="2">Secondaire pro. 600-899h (QC)</option>
                    <option value="3">Secondaire pro. 900h+ (QC) ou 1 an+ (Hors QC)</option>
                    <option value="4">Postsecondaire général 2 ans</option>
                    <option value="5">Postsecondaire technique 900h+ (QC) ou 1-2 ans (Hors QC)</option>
                    <option value="6">Postsecondaire technique 3 ans</option>
                    <option value="7">Universitaire 1er cycle 1 an</option>
                    <option value="8">Universitaire 1er cycle 2 ans</option>
                    <option value="9">Universitaire 1er cycle 3 ou 4 ans</option>
                    <option value="10">Universitaire 1er cycle 5 ans+</option>
                    <option value="11">Universitaire 2e cycle 1 an</option>
                    <option value="12">Universitaire 2e cycle 2 ans+</option>
                    <option value="13">Spécialisation médicale 2 ans+ ou Doctorat (3e cycle)</option>
                </select>
            </div>

            <h3 class="section-header">2. Besoins du Québec (Max 700 pts)</h3>
            
            <div class="card p-3">
                <h5>a. Diagnostic de main-d'œuvre et expérience </h5> <small>Consultez ici le <a href="https://cdn-contenu.quebec.ca/cdn-contenu/immigration/formulaires/fr/PSTQ/LIS_Diagnostics_moyen_terme_2024-2028_516_professions.pdf" target="_blank">DIAGNOSTICS DE MOYEN TERME (2024-2028)
POUR LES 516 PROFESSIONS DE LA CLASSIFICATION NATIONALE DES PROFESSIONS</a></small>
                <div class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">Diagnostic de la profession</label>
                        <select class="form-select calc-input" id="diag_type" onchange="calculateTotal()">
                            <option value="none">Équilibre / Sans diagnostic</option>
                            <option value="leger">Léger déficit</option>
                            <option value="deficit">Déficit</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Durée expérience dans cette profession</label>
                        <select class="form-select calc-input" id="diag_duree" onchange="calculateTotal()">
                            <option value="0">Moins de 12 mois</option>
                            <option value="1">12 à 23 mois</option>
                            <option value="2">24 à 35 mois</option>
                            <option value="3">36 à 47 mois</option>
                            <option value="4">48 à 60 mois</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="card p-3">
                <h5>b. Diplôme du Québec </h5>
                <select class="form-select calc-input" data-cat="diplome_qc">
                    <option value="0">Aucun / Non éligible (0 pts)</option>
                    <option value="20">Secondaire général complété</option>
                    <option value="20">Secondaire pro. (DEP/ASP) 600-899h</option>
                    <option value="40">Secondaire pro. (DEP/ASP) 900h+</option>
                    <option value="60">Postsecondaire général 2 ans</option>
                    <option value="80">Postsecondaire technique 900h+</option>
                    <option value="120">Postsecondaire technique 3 ans</option>
                    <option value="120">Universitaire 1er cycle 1 an</option>
                    <option value="140">Universitaire 1er cycle 2 ans</option>
                    <option value="160">Universitaire 1er cycle 3-4 ans</option>
                    <option value="170">Universitaire 1er cycle 5 ans+ ou 2e cycle 1 an</option>
                    <option value="180">Universitaire 2e cycle 2 ans+</option>
                    <option value="200">Spécialisation médicale ou Doctorat</option>
                </select>
            </div>

            <div class="card p-3">
                <h5>c. Durée de l'expérience de travail au Québec </h5>
                <select class="form-select calc-input" data-cat="exp_qc">
                    <option value="0">Moins de 12 mois (0 pts)</option>
                    <option value="40">12 à 23 mois</option>
                    <option value="80">24 à 35 mois</option>
                    <option value="120">36 à 47 mois</option>
                    <option value="160">48 à 60 mois</option>
                </select>
            </div>

            <div class="card p-3">
                <h5>d. Séjour hors Communauté métropolitaine de Montréal (CMM) </h5>
                <div class="alert alert-info py-2"><small>Calcul cumulatif (Résidence, Travail, Études).</small></div>
                
                <div class="row g-3">
                    <div class="col-md-4">
                        <label class="form-label">Résidence hors CMM</label>
                        <select class="form-select calc-input" data-cat="hors_cmm_res">
                            <option value="0">0 à 5 mois</option>
                            <option value="6">6 à 11 mois</option>
                            <option value="16">12 à 23 mois</option>
                            <option value="24">24 à 35 mois</option>
                            <option value="32">36 à 47 mois</option>
                            <option value="40">48 mois et plus</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Travail hors CMM</label>
                        <select class="form-select calc-input" data-cat="hors_cmm_travail">
                            <option value="0">0 à 5 mois</option>
                            <option value="9">6 à 11 mois</option>
                            <option value="24">12 à 23 mois</option>
                            <option value="36">24 à 35 mois</option>
                            <option value="48">36 à 47 mois</option>
                            <option value="60">48 mois et plus</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Études hors CMM</label>
                        <select class="form-select calc-input" data-cat="hors_cmm_etudes">
                            <option value="0">0 à 5 mois</option>
                            <option value="3">6 à 11 mois</option>
                            <option value="8">12 à 23 mois</option>
                            <option value="12">24 à 35 mois</option>
                            <option value="16">36 à 47 mois</option>
                            <option value="20">48 mois et plus</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="card p-3">
                <h5>e. Offre d'emploi validée </h5>
                <select class="form-select calc-input" data-cat="offre_emploi">
                    <option value="0">Aucune offre validée</option>
                    <option value="30">À l'intérieur de la CMM</option>
                    <option value="50">À l'extérieur de la CMM</option>
                </select>
            </div>

            <div class="card p-3">
                <h5>f. Autorisation d'exercer ou reconnaissance </h5>
                <div class="form-check">
                    <input class="form-check-input calc-input" type="checkbox" id="auth_check" onchange="calculateTotal()">
                    <label class="form-check-label" for="auth_check">
                        Détient une autorisation d'exercer ou reconnaissance partielle/complète (50 pts)
                    </label>
                </div>
            </div>

            <div id="spouse-section" class="d-none">
                <h3 class="section-header">3. Facteurs d'adaptation (Max 180 pts)</h3>
                <div class="alert alert-warning">Ces critères concernent votre époux(se) ou conjoint(e) de fait.</div>

                <div class="card p-3">
                    <h5>a. Séjour études sans diplôme (Demandeur principal) </h5>
                    <small class="text-muted">Note: Ce critère est dans la section adaptation mais s'applique au demandeur.</small>
                    <div class="mt-3">
                        <label class="form-label fw-bold">Statut et durée du séjour :</label>
                        <select class="form-select calc-input" data-cat="sejour_etude_combine">
                            <option value="0">Aucun / Moins de 6 mois (0 pts)</option>
                            <optgroup label="Séjour Terminé">
                                <option value="1">Terminé - 6 à 11 mois (1 pt)</option>
                                <option value="3">Terminé - 12 à 23 mois (3 pts)</option>
                                <option value="5">Terminé - 24 à 35 mois (5 pts)</option>
                                <option value="8">Terminé - 36 à 47 mois (8 pts)</option>
                                <option value="10">Terminé - 48 mois et plus (10 pts)</option>
                            </optgroup>
                            <optgroup label="Séjour En Cours">
                                <option value="5">En cours - 6 à 11 mois (5 pts)</option>
                                <option value="12">En cours - 12 à 23 mois (12 pts)</option>
                                <option value="18">En cours - 24 à 35 mois (18 pts)</option>
                                <option value="24">En cours - 36 à 47 mois (24 pts)</option>
                                <option value="30">En cours - 48 mois et plus (30 pts)</option>
                            </optgroup>
                        </select>
                    </div>
                </div>

                <div class="card p-3">
                    <h5>b. Membre de la parenté au Québec </h5>
                    <select class="form-select calc-input" data-cat="parente">
                        <option value="0">Aucun</option>
                        <option value="10">Lié au ressortissant étranger (10 pts)</option>
                        <option value="5">Lié au conjoint (5 pts)</option>
                    </select>
                </div>

                <div class="card p-3">
                    <h5>c. Connaissance du français du conjoint </h5>
                    <div class="row g-3">
                        <div class="col-6"><label>Compréhension orale</label>
                            <select class="form-select calc-input" data-cat="cj_fr_oral_comp">
                                <option value="0">Niveau 1-3</option><option value="4">Niveau 4</option><option value="6">Niveau 5-6</option><option value="8">Niveau 7-8</option><option value="10">Niveau 9+</option>
                            </select>
                        </div>
                        <div class="col-6"><label>Production orale</label>
                            <select class="form-select calc-input" data-cat="cj_fr_oral_prod">
                                <option value="0">Niveau 1-3</option><option value="4">Niveau 4</option><option value="6">Niveau 5-6</option><option value="8">Niveau 7-8</option><option value="10">Niveau 9+</option>
                            </select>
                        </div>
                        <div class="col-6"><label>Compréhension écrite</label>
                            <select class="form-select calc-input" data-cat="cj_fr_ecrit_comp">
                                <option value="0">Niveau 1-3</option><option value="4">Niveau 4</option><option value="6">Niveau 5-6</option><option value="8">Niveau 7-8</option><option value="10">Niveau 9+</option>
                            </select>
                        </div>
                        <div class="col-6"><label>Production écrite</label>
                            <select class="form-select calc-input" data-cat="cj_fr_ecrit_prod">
                                <option value="0">Niveau 1-3</option><option value="4">Niveau 4</option><option value="6">Niveau 5-6</option><option value="8">Niveau 7-8</option><option value="10">Niveau 9+</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="card p-3">
                    <h5>d. Âge du conjoint </h5>
                    <select class="form-select calc-input" data-cat="cj_age">
                        <option value="0">45 ans ou plus (0 pts)</option>
                        <option value="18">16 à 19 ans</option>
                        <option value="20">20 à 30 ans</option>
                        <option value="18">31 ans</option>
                        <option value="17">32 ans</option>
                        <option value="16">33 ans</option>
                        <option value="15">34 ans</option>
                        <option value="14">35 ans</option>
                        <option value="12">36 ans</option>
                        <option value="10">37 ans</option>
                        <option value="8">38 ans</option>
                        <option value="7">39 ans</option>
                        <option value="6">40 ans</option>
                        <option value="5">41 ans</option>
                        <option value="4">42 ans</option>
                        <option value="3">43 ans</option>
                        <option value="2">44 ans</option>
                    </select>
                </div>

                <div class="card p-3">
                    <h5>e. Expérience travail conjoint au Québec </h5>
                    <select class="form-select calc-input" data-cat="cj_exp">
                        <option value="0">0 à 5 mois</option>
                        <option value="5">6 à 11 mois</option>
                        <option value="10">12 à 23 mois</option>
                        <option value="15">24 à 35 mois</option>
                        <option value="23">36 à 47 mois</option>
                        <option value="30">48 à 60 mois</option>
                    </select>
                </div>

                <div class="card p-3">
                    <h5>f. Niveau scolarité conjoint </h5>
                    <select class="form-select calc-input" data-cat="cj_scolarite">
                        <option value="0">Inférieur au secondaire</option>
                        <option value="2">Secondaire général ou Pro 600h+</option>
                        <option value="4">Secondaire pro 900h+ (QC) ou 1 an (Hors)</option>
                        <option value="6">Postsecondaire général 2 ans</option>
                        <option value="8">Postsecondaire tech 900h+ / 1-2 ans</option>
                        <option value="12">Postsecondaire tech 3 ans / Univ 1er cyc 1 an</option>
                        <option value="14">Univ 1er cycle 2 ans</option>
                        <option value="16">Univ 1er cycle 3-4 ans</option>
                        <option value="17">Univ 1er cycle 5 ans+ / 2e cycle 1 an</option>
                        <option value="18">Univ 2e cycle 2 ans+</option>
                        <option value="20">Spécialisation méd. / Doctorat</option>
                    </select>
                </div>
                
                 <div class="card p-3">
                    <h5>g. Diplôme du Québec du conjoint </h5>
                    <select class="form-select calc-input" data-cat="cj_diplome_qc">
                        <option value="0">Aucun</option>
                        <option value="3">Secondaire général ou Pro 600h+</option>
                        <option value="6">Secondaire pro 900h+</option>
                        <option value="9">Postsecondaire général 2 ans</option>
                        <option value="12">Postsecondaire tech 900h+</option>
                        <option value="18">Postsecondaire tech 3 ans / Univ 1er cyc 1 an</option>
                        <option value="21">Univ 1er cycle 2 ans</option>
                        <option value="24">Univ 1er cycle 3-4 ans</option>
                        <option value="25">Univ 1er cycle 5 ans+ / 2e cycle 1 an</option>
                        <option value="27">Univ 2e cycle 2 ans+</option>
                        <option value="30">Spécialisation méd. / Doctorat</option>
                    </select>
                </div>
            </div>

        </form>
    </div>

    <div class="sticky-bottom-bar d-flex justify-content-between align-items-center">
        <div>
            <span class="fs-5">Total des points : </span>
            <span id="totalScore" class="score-badge">0</span>
        </div>
        <div>
             <button type="button" class="btn btn-outline-light btn-sm" onclick="document.getElementById('calculatorForm').reset(); calculateTotal()">Réinitialiser</button>
        </div>
    </div>

    <script>
        // DATA TABLES FROM PDF
        // Structure: [Single Points, Coupled Points]
        const pointsData = {
            fr_oral: [[0,0], [38,30], [44,35], [50,40], [50,40]], // Sources 9, 10
            fr_ecrit: [[0,0], [38,30], [44,35], [50,40], [50,40]], // Sources 15, 16
            
            // Age [Source 52-53]: Index corresponds to select option value
            age: [
                [0,0], // 45+
                [110,90], // 18-19
                [120,100], // 20-30
                [110,95], // 31
                [100,90], // 32
                [90,81], // 33
                [80,72], // 34
                [75,68], // 35
                [70,63], // 36
                [65,59], // 37
                [60,54], // 38
                [55,50], // 39
                [50,45], // 40
                [40,36], // 41
                [30,27], // 42
                [20,18], // 43
                [10,9]   // 44
            ],

            // Experience [Source 56]
            experience: [[0,0], [20,15], [40,30], [50,35], [70,50]],
        };
        
        // Correcting Scolarité mapping
        const educationPoints = [
             [0,0],     // 0 None
             [13,11],   // 1 Sec Gen
             [13,11],   // 2 Sec Pro Short
             [26,22],   // 3 Sec Pro Long / Hors
             [39,33],   // 4 Post Gen
             [52,44],   // 5 Post Tech Short
             [78,66],   // 6 Post Tech Long
             [78,66],   // 7 Univ 1-1
             [91,77],   // 8 Univ 1-2
             [104,88],  // 9 Univ 1-3
             [110,93],  // 10 Univ 1-5
             [110,93],  // 11 Univ 2-1
             [117,99],  // 12 Univ 2-2
             [130,110]  // 13 Univ 3/Med
        ];

        // Diagnosis Matrix [Source 70]
        // Rows: Duration (0-4), Cols: Diagnosis (0=None, 1=Slight, 2=Deficit)
        const diagMatrix = [
            // <12, 12-23, 24-35, 36-47, 48+
            [0, 5, 10, 15, 25],     // None
            [0, 70, 80, 90, 100],   // Slight
            [0, 90, 100, 110, 120]  // Deficit
        ];

        function toggleSpouseSection() {
            const status = document.getElementById('statutMarital').value;
            const section = document.getElementById('spouse-section');
            if(status === 'couple') {
                section.classList.remove('d-none');
            } else {
                section.classList.add('d-none');
            }
        }

        function getVal(selector) {
            const el = document.querySelector(selector);
            return el ? parseInt(el.value) : 0;
        }

        function calculateTotal() {
            let total = 0;
            const isCoupled = document.getElementById('statutMarital').value === 'couple';
            const idx = isCoupled ? 1 : 0; // Index for data arrays

            // --- 1. CAPITAL HUMAIN ---
            
            // French
            const frInputs = ['fr_oral_comp', 'fr_oral_prod', 'fr_ecrit_comp', 'fr_ecrit_prod'];
            frInputs.forEach(cat => {
                const level = getVal(`[data-cat="${cat}"]`);
                const arr = (cat.includes('oral')) ? pointsData.fr_oral : pointsData.fr_ecrit;
                total += arr[level][idx];
            });

            // Age
            const ageLvl = getVal('[data-cat="age"]');
            total += pointsData.age[ageLvl][idx];

            // Experience
            const expLvl = getVal('[data-cat="experience"]');
            total += pointsData.experience[expLvl][idx];

            // Education
            const eduLvl = getVal('[data-cat="scolarite"]');
            total += educationPoints[eduLvl][idx];

            // --- 2. BESOINS DU QUEBEC ---
            // (Points generally fixed regardless of spouse for main applicant attributes in this section)

            // Diagnosis
            const diagTypeStr = document.getElementById('diag_type').value;
            const diagDur = parseInt(document.getElementById('diag_duree').value);
            let diagRow = 0;
            if(diagTypeStr === 'leger') diagRow = 1;
            if(diagTypeStr === 'deficit') diagRow = 2;
            total += diagMatrix[diagRow][diagDur];

            // Direct Additions
            total += getVal('[data-cat="diplome_qc"]');
            total += getVal('[data-cat="exp_qc"]');
            total += getVal('[data-cat="hors_cmm_res"]');
            total += getVal('[data-cat="hors_cmm_travail"]');
            total += getVal('[data-cat="hors_cmm_etudes"]');
            total += getVal('[data-cat="offre_emploi"]');

            // Auth Checkbox
            if(document.getElementById('auth_check').checked) total += 50;

            // --- 3. ADAPTATION ---
            // Note: "Sejour etude sans diplome" applies to applicant but is in adaptation list (Source 104)
            // It is counted even if single? The source 98 says "Autres criteres... facteurs d'adaptation" 
            // and source 104 table header says "Ressortissant etranger (Max 30 pts)".
            // Unlike other tables, it doesn't split columns for "Seul" vs "Avec conjoint".
            // So we add it always.
            total += getVal('[data-cat="sejour_etude_combine"]');

            if(isCoupled) {
                total += getVal('[data-cat="parente"]');
                total += getVal('[data-cat="cj_fr_oral_comp"]');
                total += getVal('[data-cat="cj_fr_oral_prod"]');
                total += getVal('[data-cat="cj_fr_ecrit_comp"]');
                total += getVal('[data-cat="cj_fr_ecrit_prod"]');
                total += getVal('[data-cat="cj_age"]');
                total += getVal('[data-cat="cj_exp"]');
                total += getVal('[data-cat="cj_scolarite"]');
                total += getVal('[data-cat="cj_diplome_qc"]');
            }

            // Update UI
            document.getElementById('totalScore').innerText = total;
        }

        // Attach listeners
        document.querySelectorAll('.calc-input').forEach(input => {
            input.addEventListener('change', calculateTotal);
        });

        // Init
        toggleSpouseSection();
    </script>
</body>
</html>
